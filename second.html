<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Second Solution</title>
        <link rel='stylesheet' href='css/main.css'/>
    </head>
    <body>
        <div class="wrapper">
            <div class="resource-header">
                <div class="title-header">
                    <h1 id="topic">Knowledge Check: Exercise</h1>
                </div>
                <div class="dropdown">
                    <button class="btn resource-btn">Resources</button>
                    <div class="dropdown-menu">
                        <a href="#">Alaska Statute 17.37 Medical Uses of Marijuana</a>
                        <a href="#">Alaska Statute 17.38 The Regulation of Marijuana</a>
                        <a href="#">3 AAC 306 Regulations for the Marijuana Control Board</a>
                        <a href="#">Marijuana Handler Permit Application Instructions</a>
                    </div>
                </div>
            </div>
            <div class="main-content" id="index-content">
                <h1>KNOWLEDGE CHECK</h1>
                <p>Click on each word to review its definition</p>
                <ul class="definition-boxes" id="def-load">

                </ul>
            </div>
            <div class="main-content" id="second-content">
                    <h1>Checking IDs Exercise</h1>
                    <p>Examine ID to determine whether or not you would sell to the customer.</p>
                    <img src="https://i.imgur.com/zE5tOlu.jpg" width="400" height="250" alt="Open Shop Image">
                    <ul>
                        <li><a href="#" class="toggleLinks" data-id="sell-div">SELL</a></li>
                        <li><a href="#" class="toggleLinks" data-id="dont-sell-div">DON'T SELL</a></li>
                    </ul>
                    <div id="sell-div" class="toggleDiv"> 
                            <strong>Incorrect.</strong>
                            <br>
                            The correct answer is:
                            <br>
                            <strong>DON'T SELL</strong>
                            <br>
                            This license has some bumps and scratches indicating that it may have been tampered with. It's expired.
                            <br>
                            <a href="#" class="xBtn" data-id="sell-div">X</a>
                    </div>
                    <div id="dont-sell-div" class="toggleDiv">
                        <strong>Congratulations.</strong>
                        <br>
                        The correct answer is:
                        <br>
                        <strong>DON'T SELL</strong>
                        <br>
                        This license has some bumps and scratches indicating that it may have been tampered with. It's expired.
                        <br>
                        <a href="#" class="xBtn" data-id="dont-sell-div">X</a>
                    </div>
                </div>
            <div class="navigation-btn">
                <button class="btn" id="nav-btn"> Next </button>
                <a href="index.html">Go To First Solution</a>
            </div>
        </div>
    </body>
</html>
<script>

document.addEventListener('DOMContentLoaded', function(){
    //Wait to add event listeners until the DOM is fully loaded. This is needed
    // when wanting to access elements that are later in the HTML than the <script>.

    //First We'll create our content array for the boxes to load them in with JS
    var content = [
        {
            title: 'Consumer',
            message: 'A person 21 years of age or older who purchases marijuana or marijuana products for personal use by persons 21 years of age or older, but not for resale to others.'
        },
        {
            title: 'Consumption',
            message: 'The act of ingesting, inhaling, or otherwise introducing marijuana into the human body.'
        },
        {
            title: 'Marijuana',
            message: 'All parts of the plant of the genus cannabis whether growing or not, the seeds thereof, the resin extracted from any part of the plant, and every compound, manufacture, salt, derivative, mixture, or preparation of the plant, its seeds, or its resin, including marijuana concentrate. Marijuana does not include fiber produced from the stalks, oil, or cake made from the seeds of the plant, sterilized seed of the plant which is incapable of germination, or the weight of any other ingredient combined with marijuana to prepare topical or oral administrations, food, drink, or other products.'
        },
        {
            title: 'Marijuana Accessories',
            message: 'Any equipment, products, or materials of any kind which are used, intended for use, or designed for use in planting, propagating, cultivating, growing, harvesting, composting, manufacturing, compounding, converting, producing, processing, preparing, testing, analyzing, packaging, repackaging, storing, vaporizing, or containing marijuana, or for ingesting, inhaling, or otherwise introducing marijuana into the human body.'
        },
        {
            title: 'Marijuana Cultivation Facility',
            message: 'A marijuana cultivation facility, a marijuana testing facility, a marijuana product manufacturing facility, or a retail marijuana store.'
        },
        {
            title: 'Marijuana Establishment',
            message: 'A marijuana cultivation facility, a marijuana testing facility, a marijuana product manufacturing facility, or a retail marijuana store.'
        },
        {
            title: 'Marijuana Product Manufacturing Facility',
            message: 'An entity registered to purchase marijuana; manufacture, prepare, and package marijuana products; and sell marijuana and marijuana products to other marijuana product manufacturing facilities and to retail marijuana stores, but not to consumers.'
        },
        {
            title: 'Marijuana Products',
            message: 'Concentrated marijuana products and marijuana products that are comprised of marijuana and other ingredients and are intended for use or consumption, such as, but not limited to, edible products, ointments, and tinctures.'
        },
        {
            title: 'Marijuana Testing Facility',
            message: 'An entity registered to analyze and certify the safety and potency of marijuana.'
        },
        {
            title: 'Retail Marijuana Store',
            message: 'An entity registered to purchase marijuana from marijuana cultivation facilities, to purchase marijuana and marijuana products from marijuana product manufacturing facilities, and to sell marijuana and marijuana products to consumers.'
        }
    ];

    // Then we'll loop through our content and append the divs to id="def-load"

    let contentDiv = document.getElementById('def-load');
    for(var i = 0; i < content.length; i++){
        contentDiv.innerHTML += '<li class="box" data-toggle="def-'+ i + '">' + content[i].title + '</li><div class="definition" id="def-'+i+'"><p>'+content[i].message+'</p><div class="exit-btn">X</div>';
    }

    // Collect all the box definitions into an array, then loop through them to add click listeners
    // When clicking a box, we'll toggle off all of the elements, then toggle on our specified one just in case.
    var list = document.getElementsByClassName('box');
    for(var i = 0; i < list.length; i++){
        list[i].addEventListener('click', function () {
            var toggleId = this.dataset.toggle;
            for(var x = 0; x < list.length; x++){
                document.getElementById('def-' + x).style.display = "none";
            }
            document.getElementById(toggleId).style.display = "flex";
        })
    }

    //Add click listener to toggle off the parent node on the definition popups X link
    var exitBtns = document.getElementsByClassName('exit-btn');
    for(var i = 0; i < exitBtns.length; i++){
        exitBtns[i].addEventListener('click', function() {
            this.parentNode.style.display = 'none';
        });
    }

    //Set index page to true, allowing us to toggle between the two pages if we're going between the two
    var indexPage = true;
    document.getElementById('nav-btn').addEventListener('click', function(){
        indexPage = !indexPage;
        indexPage ? showIndexPage() : showSecondPage();
    });

    //Set styles to show index page and change button and topic text
    function showIndexPage() {
        document.getElementById('index-content').style.display = "block";
        document.getElementById('second-content').style.display = "none";
        document.getElementById('nav-btn').innerText = "Next";
        document.getElementById('topic').innerText = "Knowledge Check: Exercise";
    }

    //Set styles to show second page and change button and topic text
    function showSecondPage() {
        document.getElementById('index-content').style.display = "none";
        document.getElementById('second-content').style.display = "block";
        document.getElementById('nav-btn').innerText = "Back";
        document.getElementById('topic').innerText = "AS 17.37 Medical Uses of Marijuana";
    }

    //Set click listeners to toggle the sell/don't sell links
    var toggleLinks = document.getElementsByClassName('toggleLinks');
    for(var i = 0; i < toggleLinks.length; i++){
        toggleLinks[i].addEventListener('click', function () {
            toggleAll(this.dataset.id);
        })
    }

    //Toggle all funciton will loop through all of the toggle div texts and hide all, then toggle on the id passed through params
    var toggleDiv = document.getElementsByClassName('toggleDiv');
    function toggleAll(id){
        for(var i = 0; i < toggleDiv.length; i++){
            toggleDiv[i].style.display = 'none';
        }
        document.getElementById(id).style.display = "block";
    }

    // Set Click listeners for the X buttons on the second page to close the sell / don't sell tabs
    var xBtn = document.getElementsByClassName('xBtn');
    for(var i = 0; i < xBtn.length; i++){
        xBtn[i].addEventListener('click', function(e) {
            e.preventDefault();
            hideDiv(this.dataset.id)
        });
    }
    
    // Hide div by ID
    function hideDiv(id) {
        document.getElementById(id).style.display = "none";
    }
});

</script>